const main=document.querySelector(".main"),menu=document.querySelector(".menu"),headerNavBurger=document.querySelector(".header-nav-burger"),menuClose=document.querySelector(".menu__close"),range=document.querySelector(".calc-options__range"),calcResultsValue=document.querySelector(".calc-results__value"),calcOptionsTariffs=document.querySelectorAll(".calc-options__tariff"),calcResultsAverage=document.querySelector(".calc-results__average"),calcResultsObject=document.querySelector(".calc-results__object"),menuItems=document.querySelectorAll(".menu__item"),contentBlocks=document.querySelectorAll(".block"),headerScroll=document.querySelector(".header__scroll"),navBurgerMobile=document.querySelector(".menu-burger"),portfolio=document.querySelector(".portfolio"),TabItemSelector=".portfolio-menu__item",ContentItemSelector=".portfolio-block",ActiveTabHeaderClass="portfolio-menu__item_active",ActiveTabContentClass="portfolio-block_active";let tariffTimeout=null;class TabsManager{constructor(e){this.tabs=[],this.activeTab=null,this.initFromHtml(e),this.activateTab(this.tabs[0])}initFromHtml(e){const t=e.querySelectorAll(TabItemSelector),c=e.querySelectorAll(".portfolio-block");for(var o=0;o<t.length;o++)this.registerTab(t[o],c[o])}registerTab(e,t){const c=new TabItem(e,t);c.onActivate(()=>this.activateTab(c)),this.tabs.push(c)}activateTab(e){this.activeTab&&this.activeTab.setActive(!1),this.activeTab=e,this.activeTab.setActive(!0)}}class TabItem{constructor(e,t){this.header=e,this.content=t}onActivate(e){this.header.addEventListener("click",()=>e(this))}setActive(e){this.header.classList.toggle(ActiveTabHeaderClass,e),this.content.classList.toggle(ActiveTabContentClass,e)}}function showMenu(){main.classList.toggle("main_active"),menu.classList.toggle("menu_active"),headerNavBurger.classList.toggle("header-nav-burger_active"),navBurgerMobile.classList.toggle("menu-burger_active")}function scrollTo(e){window.scroll({left:0,top:e.offsetTop,behavior:"smooth"})}function switchTariff(e){document.querySelector(".calc-options__tariff_active").classList.remove("calc-options__tariff_active"),e.classList.add("calc-options__tariff_active")}function calc(e){calcResultsAverage.textContent=e.replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,"$1 ")+" тг.",calcResultsObject.textContent=(e*range.value).toString().replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,"$1 ")+" тг."}function init(){document.addEventListener("scroll",()=>{document.documentElement.scrollTop>=400&&navBurgerMobile.classList.add("menu-burger_fixed"),document.documentElement.scrollTop<400&&navBurgerMobile.classList.remove("menu-burger_fixed")}),navBurgerMobile.addEventListener("click",showMenu),headerNavBurger.addEventListener("click",showMenu),menuClose.addEventListener("click",showMenu),menuItems.forEach((e,t)=>{e.addEventListener("click",()=>{scrollTo(contentBlocks[t]),showMenu()})}),headerScroll.addEventListener("click",()=>{scrollTo(contentBlocks[1])}),range.addEventListener("change",e=>{calcResultsValue.innerHTML=e.target.value.replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,"$1 ")+" м<sup>2</sup>",calc(document.querySelector(".calc-options__tariff_active").dataset.cost)}),calcOptionsTariffs.forEach(e=>{e.addEventListener("click",()=>{switchTariff(e),calc(e.dataset.cost)}),e.addEventListener("mouseover",()=>{tariffTimeout=setTimeout(()=>{e.querySelector(".calc-options__hint").classList.add("calc-options__hint_active")},300)}),e.addEventListener("mouseout",()=>{clearTimeout(tariffTimeout),e.querySelector(".calc-options__hint").classList.remove("calc-options__hint_active")})}),new Powerange(range,{min:100,max:5e4,step:100,start:1e3});new Swiper(".swiper-container",{slidesPerView:3,spaceBetween:30,scrollbar:{el:".swiper-scrollbar",draggable:!0},breakpoints:{769:{slidesPerView:7},576:{slidesPerView:5},421:{slidesPerView:4}}});new TabsManager(portfolio)}document.addEventListener("DOMContentLoaded",(function(){init()}));
jQuery(document).ready(function($){"use strict";$('#OfferShort').submit(function(){$("body").addClass("loading");$('.error-message').remove();var dataSubmit=$(this).serializeArray();$("#error_message").html('');setTimeout(function(){$.ajax({type:'POST',url:'/Signup/offer',data:dataSubmit,dataType:'json',async:false,success:function(validationResponse){if(validationResponse.Res=='error'){$("#error_message").html(validationResponse.Msg);$.each(validationResponse.ResCustomer,function(fieldName,message){var element=$("input[name='data[Customer]["+fieldName+"]']");element.parent('div').find('.error-message').remove();var create=$(document.createElement('div')).insertAfter(element);create.addClass('error-message').html(message[0]);});if(validationResponse.ResUser!=undefined){$.each(validationResponse.ResUser,function(fieldName,message){var element=$("input[name='data[User]["+fieldName+"]']");element.parent('div').find('.error-message').remove();var create=$(document.createElement('div')).insertAfter(element);create.addClass('error-message').html(message[0]);});}
$.each(validationResponse.ResCard,function(fieldName,message){var element=$("input[name='data[CreditCard]["+fieldName+"]']");element.parent('div').find('.error-message').remove();var create=$(document.createElement('div')).insertAfter(element);create.addClass('error-message').html(message[0]);});$("body").removeClass("loading");}else{if(validationResponse.Res==='ok'){document.location.href=validationResponse.Link;}}},error:function(jqXHR,textStatus,errorThrown){console.log(jqXHR+'-----'+textStatus+'-----'+errorThrown);}});},200);return false;});$("#close-viewing").on("click",function(event){$("#viewing-lp").remove();event.preventDefault();});$('.btn-back-to-top').click(function(){$('body,html').animate({scrollTop:$('#top').offset().top},500);});$('.phone_number').inputmask({"mask":"+1 (999) 999-9999"});$('#CreditCardCcNumber').inputmask({"mask":"9999 9999 9999 9999"});});$(document).on('change','.cart-country-shipping',function(){var country_id=$(this).val();var url="/country_manager/state_provinces/ajaxGetStateProvinces";$.ajax({url:url,data:{country_id:country_id},type:"POST"}).done(function(data){var state_provinces=$.parseJSON(data);var $el=$("#CustomerShippingStateId");$el.empty();$.each(state_provinces,function(value,key){$el.append($("<option></option>").attr("value",value).text(key));});});});$(document).on('change','.cart-country-billing',function(){var country_id=$(this).val();var url="/country_manager/state_provinces/ajaxGetStateProvinces";$.ajax({url:url,data:{country_id:country_id},type:"POST"}).done(function(data){var state_provinces=$.parseJSON(data);var $el=$("#CustomerBillingStateId");$el.empty();$.each(state_provinces,function(value,key){$el.append($("<option></option>").attr("value",value).text(key));});});});$(function(){let isMobile=window.matchMedia("only screen and (max-width: 760px)").matches;if(isMobile){$(".navbar").addClass("fixed-bottom");}});function startTimer(duration){var timer=duration,minutes,seconds;setInterval(function(){minutes=parseInt(timer/60,10);seconds=parseInt(timer%60,10);minutes=minutes<10?"0"+minutes:minutes;seconds=seconds<10?"0"+seconds:seconds;var min=Array.from(minutes.toString()).map(Number);var sec=Array.from(seconds.toString()).map(Number);$('#min1').html(min[0]);$('#min2').html(min[1]);$('#sec1').html(sec[0]);$('#sec2').html(sec[1]);if(--timer<0){timer=duration;}},1000);}
function setDate(){var objToday=new Date(),domEnder=function(){var a=objToday;if(/1/.test(parseInt((a+"").charAt(0))))return "th";a=parseInt((a+"").charAt(1));return 1==a?"st":2==a?"nd":3==a?"rd":"th"}(),dayOfMonth=today+(objToday.getDate()<10)?'0'+objToday.getDate()+domEnder:objToday.getDate()+domEnder,months=new Array('January','February','March','April','May','June','July','August','September','October','November','December'),curMonth=months[objToday.getMonth()],curYear=objToday.getFullYear();var today=dayOfMonth+" of "+curMonth+", "+curYear;$('#timeDate').html(today);}
window.onload=function(){var fiveMinutes=60*5;startTimer(fiveMinutes);setDate();};
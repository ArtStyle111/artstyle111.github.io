<script src="../scripts/jquery.min.js"></script>
<script type="text/javascript" src="https://www.coffee-butik.ru/ajax/boxberry.js"> </script>
<div style="border: 3px solid #ff932b; -moz-box-shadow: 0 0 38px rgba(0,0,0,.1); -webkit-box-shadow: 0 0 38px rgba(0,0,0,.1); box-shadow: 0 0 38px rgba(0,0,0,.1);min-width: 550px;min-height: 300px; border-radius: 9px;background: #FFF;" >
	<div class="h1" style="color: #000;font-family: Tahoma;font-size: 24px;font-weight: normal;margin: 30px 0px 0px 30px;">Расчёт стоимости доставки</div>
	<div class="h3" style="padding-bottom: 10px;font-size: 21px;font-weight: 400;margin: 5px 0px 0px 30px;">Доставка нашим курьером:</div>
	<form role="form" name="DELIVERY_CALC_FORM" method="post" role="form" action="delivery_calc.php.html" style="margin: 5px 0px 0px 30px;">
		<div class="radio">
			<label style="font-size: 16px;">
				<input type="radio" name="optionsRadios" id="optionsRadios1" value="option1">
				Москва (в пределах МКАД)
			</label>
		</div>
		<div class="radio">
			<label style="font-size: 16px;">
				<input type="radio" name="optionsRadios" id="optionsRadios2" value="option2">
				Новая Москва и ближайшее Подмосковье (до 10 км от МКАД)
			</label>
		</div>
		<div class="radio">
			<label style="font-size: 16px;">
				<input type="radio" name="optionsRadios" id="optionsRadios3" value="option3">
				Московская область
			</label>
		</div>
		<div class="delivery__line" style="height: 2px;width: 100%;background-color: #f1f1f1;margin-bottom: 5px;"></div>
		<h2 style="font-size: 21px; font-weight: 400;">Доставка транспортной компанией:</h2>
		<div class="radio">
			<label style="font-size: 16px;">
				<input type="radio" name="optionsRadios" id="optionsRadios4" value="option4" onclick="">
				Другой город РФ, Белоруссии и Казахстана
			</label>
		</div>
		<div style="display: none;padding: 15px; margin-right: 20px; border: 1px solid transparent; border-radius: 4px;" class="input_km_from_mkad alert alert-gray">
			<label for="km_from_mkad">Укажите количество километров от МКАД: </label>
			<input size="4" type="text" class="text-center" id="km_from_mkad" >
		</div>
	</form>
	<div class="alert alert-warning result_calc_delivery" style="display: none;padding: 15px; margin: 20px 20px 20px 29px;border: 1px solid transparent; border-radius: 4px;"></div>
	<script type="text/javascript">
function callback_function(result){
	document.getElementById('city').innerHTML = result.name;
	document.getElementById('js-pricedelivery').innerHTML = result.price;
	document.getElementById('code_pvz').innerHTML = result.id;

	result.name = encodeURIComponent(result.name) // Что бы избежать проблемы с кириллическими символами, на страницах отличными от UTF8, вы можете использовать функцию encodeURIComponent() 

	document.getElementById('name').innerHTML =	result.name;
	document.getElementById('address').innerHTML =	result.address;
	document.getElementById('workschedule').innerHTML =	result.workschedule;
	document.getElementById('phone').innerHTML = result.phone;
	document.getElementById('period').innerHTML = result.period;
}
		$("input[name=optionsRadios]").change(function(){
			$(".result_calc_delivery").html("<p><b>Стоимость доставки:</b> ...</p>");
			var selectTypeDelivery = $(this).val();
			if (selectTypeDelivery == "option3") {
				$(".input_km_from_mkad").fadeIn();
				$("input#km_from_mkad").focus();
				if ($("input#km_from_mkad").val() < 1) 
					$(".result_calc_delivery").hide(0);
				else 
					$("input#km_from_mkad").change();
			} else {
				$(".input_km_from_mkad").hide(0);
			}
			if (selectTypeDelivery == "option1") {
				$(".result_calc_delivery").html("<p><b>Стоимость доставки:</b></p><ul><li>при заказе на сумму от 3500 руб. — бесплатная</li><li>при заказе на сумму до 3499 руб. — 249 руб.</li></ul>").fadeIn();
			}
			if (selectTypeDelivery == "option2") {
				$(".result_calc_delivery").html("<p><b>Стоимость доставки:</b></p><ul><li>при заказе на сумму от 3500 руб. — бесплатная</li><li>при заказе на сумму до 3500 руб. — 350 руб.</li></ul>").fadeIn();
			}
			if (selectTypeDelivery == "option4") {
				$(".result_calc_delivery").hide(0);
				boxberry.open(callback_function,'oWRO31Iaegcskw2EJPlk1A==','Москва','68', 1000, 1000);
			}
		});
		$("input#km_from_mkad").on("change keyup", function(){
			$(".result_calc_delivery").html("<p><b>Стоимость доставки:</b> ...</p>");
			if (this.value.match(/[^0-9]/g)) {
				this.value = this.value.replace(/[^0-9]/g, '');
			}
			var km_from_mkad = $(this).val();
			if (km_from_mkad > 0 && km_from_mkad < 11) {
				$(".result_calc_delivery").html("<p><b>Стоимость доставки:</b></p><ul><li>при заказе на сумму от 3500 руб. — бесплатная</li><li>при заказе на сумму до 3500 руб. — 350 руб.</li></ul>").fadeIn();
			} else if (km_from_mkad > 10 && km_from_mkad < 76) {
				var summDelivery = (km_from_mkad-10)*25 + 350;
				$(".result_calc_delivery").html("<p><b>Стоимость доставки:</b> " + summDelivery + " руб.</p>").fadeIn();
			} else if (km_from_mkad > 75) {
				$(".result_calc_delivery").html("<p>Вам доступна доставка транспортными компаниями или в пункты выдачи и постаматы. Для уточнения стоимости доставки свяжитесь с нашим менеджером по телефону: <a class='alert-link phone_link' href='tel:88005009250'>8&nbsp;(800) 500 92 50</a></p><p>Подробности — в разделе <a href='../dostavka/index.html' class='alert-link'>Доставка</a></p>").fadeIn();
			}
		});
	</script>
</div>
 